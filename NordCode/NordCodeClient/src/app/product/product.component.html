<div class="container-fluid p-5">
    <div class="row">
        <div class="col-lg-12 ">
            <!-- <app-cart></app-cart> -->
            <app-navbar></app-navbar>
            <div class="alert alert-danger" *ngIf="errorMsg">{{ errorMsg }} </div>
            <div class="container" fxLayout="row" fxLayout.xs="column" fxLayoutWrap fxLayoutGap="0.2%" fxLayoutAlign="center">

                <!-- Product Entry -->
                <mat-card class="card-picture">

                    <form class="example-form" #userForm="ngForm" (ngSubmit)="onSubmit(userForm)">
                        <mat-card-title fxLayout.gt-xs="row" fxLayout.xs="column">

                            <mat-icon fxFlex="5%" (click)="onClear()"> clear </mat-icon>
                            <span fxFlex="100%" class="text-center"> Add New Product </span>
                            <button mat-raised-button [disabled]="userForm.form.invalid" style="background-color:transparent;">
                        <mat-icon fxFlex="5%"> done </mat-icon>
                    </button>
                        </mat-card-title>
                        <hr>

                        <input #PID="ngModel" name="PID" ngModel type="hidden" [(ngModel)]="productModel.PID" commercial>
                        <mat-form-field class="example-full-width">
                            <input matInput #PName="ngModel" name="PName" ngModel type="text" placeholder="Product Name" required [(ngModel)]="productModel.PName" minlength="2" maxlength="200">
                            <mat-error *ngIf="PName.invalid"> Please enter min two character. </mat-error>
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                            <input matInput #PName_BN="ngModel" name="PName_BN" ngModel type="text" placeholder="Product Name Bangla" [(ngModel)]="productModel.PName_BN" minlength="2" maxlength="200">
                            <mat-error *ngIf="PName_BN.invalid"> Please enter min two character. </mat-error>
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <input matInput #Brand="ngModel" name="Brand_BN" ngModel type="text" placeholder="Brand Name" required [(ngModel)]="productModel.Brand" minlength="2" maxlength="200">
                            <mat-error *ngIf="Brand.invalid"> Please enter min two character. </mat-error>
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                            <input matInput #Brand_BN="ngModel" name="Brand_BN" ngModel type="text" placeholder="Brand Name Bangla" [(ngModel)]="productModel.Brand_BN" minlength="2" maxlength="200">
                            <mat-error *ngIf="Brand_BN.invalid"> Please enter min two character. </mat-error>
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <input matInput #Category="ngModel" name="Category" ngModel type="text" placeholder="Category Name " required [(ngModel)]="productModel.Category" minlength="2" maxlength="200">
                            <mat-error *ngIf="Category.invalid"> Please enter min two character. </mat-error>
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <input matInput #Category_BN="ngModel" name="Category_BN" ngModel type="text" placeholder="Category Name Bangla " [(ngModel)]="productModel.Category_BN" minlength="2" maxlength="200">
                            <mat-error *ngIf="Category_BN.invalid"> Please enter min two character. </mat-error>
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <input matInput #Description="ngModel" name="Description" ngModel type="text" placeholder="Description Name " required [(ngModel)]="productModel.Description" minlength="2" maxlength="200">
                            <mat-error *ngIf="Description.invalid"> Please enter min two character. </mat-error>
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <input matInput #Description_BN="ngModel" name="Description_BN" ngModel type="text" placeholder="Description Name Bangla " [(ngModel)]="productModel.Description_BN" minlength="2" maxlength="200">
                            <mat-error *ngIf="Description_BN.invalid"> Please enter min two character. </mat-error>
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <input matInput #UnitPrice="ngModel" name="UnitPrice" ngModel type="text" placeholder="UnitPrice" required [(ngModel)]="productModel.UnitPrice" minlength="0">
                            <mat-error *ngIf="UnitPrice.invalid"> Please enter min 0. </mat-error>
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <input matInput #UnitsInStock="ngModel" name="UnitsInStock" ngModel type="text" placeholder="UnitInStock" required [(ngModel)]="productModel.UnitsInStock" minlength="0">
                            <mat-error *ngIf="UnitsInStock.invalid"> Please enter min 0. </mat-error>
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <mat-label>Select an option</mat-label>
                            <mat-select [(ngModel)]="productModel.Unit" name="Unit" required>
                                <mat-option>None</mat-option>
                                <mat-option value="10">Pic</mat-option>
                                <mat-option value="11">Dozen</mat-option>
                                <mat-option value="12">Litter</mat-option>
                                <mat-option value="13">Meter</mat-option>
                                <mat-option value="14">fit</mat-option>
                            </mat-select>
                        </mat-form-field>

                        <mat-checkbox #Active="ngModel" name="Active" ngModel [(ngModel)]="productModel.Active"> Active
                        </mat-checkbox>

                        <!-- <mat-divider></mat-divider> -->
                        <p>
                            <mat-label> Display </mat-label>
                            <mat-radio-group *ngFor="let item of displays;" aria-label="Select an option" [(ngModel)]="productModel.Display" name="Display" required>
                                <mat-radio-button value="{{item.title}}"> {{item.name}} </mat-radio-button>
                            </mat-radio-group>
                        </p>
                        <mat-form-field [hidden]="true">
                            <input matInput name="fileUrl" ngModel [(ngModel)]="productModel.FileUrl">
                            <input matInput name="fileImage" ngModel [(ngModel)]="productModel.FileImage">
                            <input matInput name="fileExtension" ngModel [(ngModel)]="productModel.FileExtension">
                            <input matInput name="trackedId" ngModel [(ngModel)]="productModel.TrackedId">
                        </mat-form-field>
                        <app-image></app-image>
                        <p></p>
                        <!-- <p style="width: 20%; float: left;">
                            <input #file type="file" accept='image/*' (change)="preview(file.files)" style="display: none; position: absolute; width: 30px; height: 28px; border-radius: 50%;  margin-left: 70px;" />
                            <button type="button" (click)="file.click(this)" class="custom-fileupload"> + </button> {{message}}
                            <img [src]="imgURL" height="200" width="90px" *ngIf="imgURL" alt="" class="rounded-circle img-fluid">
                            <img src="../assets/img/member/Mahatab.png" *ngIf="!imgURL" class="rounded-circle" alt="{{message}}">
                        </p>
                        <p style="width: 20%; float: left;">
                            <input #fileLarge type="file" accept='image/*' (change)="preview(file.files, 2)" style="display: none; position: absolute; width: 30px; height: 28px; border-radius: 50%;  margin-left: 70px;" />
                            <button type="button" (click)="file.click()" class="custom-fileupload"> + </button> {{message}}
                            <img [src]="imgURLLarge" height="200" width="90px" *ngIf="imgURL" alt="" class="rounded-circle img-fluid">
                            <img src="../assets/img/member/Mahatab.png" *ngIf="!imgURL" class="rounded-circle" alt="{{message}}">
                        </p>
                        <p style="width: 20%; float: left;">
                            <input #fileExLarge type="file" accept='image/*' (change)="preview(file.files, 3)" style="display: none; position: absolute; width: 30px; height: 28px; border-radius: 50%;  margin-left: 70px;" />
                            <button type="button" (click)="file.click()" class="custom-fileupload"> + </button> {{message}}
                            <img [src]="imgURLExLarge" height="200" width="90px" *ngIf="imgURL" alt="" class="rounded-circle img-fluid">
                            <img src="../assets/img/member/Mahatab.png" *ngIf="!imgURL" class="rounded-circle" alt="{{message}}">
                        </p> -->
                    </form>
                </mat-card>

            </div>
            <br>
            <div class="container" fxLayout="row" fxLayout.xs="column" fxLayoutWrap fxLayoutGap="0.2%" fxLayoutAlign="center">
                <!-- Product List -->
                <mat-card *ngIf="!submitted">
                    <h5 class="text-center" style="text-align: center; margin: 10px;"><i class="fa fa-check "></i> Product List
                    </h5>
                    <!-- <mat-divider></mat-divider> -->
                    <mat-card-subtitle fxLayoutGap="10px">
                        <span fxFlex="6%" fxLayoutAlign="center"> Picture </span>
                        <span fxFlex="5%"> Sl No </span>
                        <span fxFlex="60%"> Name </span>
                        <span fxFlex="60%"> Description </span>
                        <span fxFlex="10"> Price </span>
                        <span fxFlex=""> Action </span>
                    </mat-card-subtitle>

                    <mat-card-subtitle *ngFor="let item of productModels; index as itemed ">
                        <mat-card-subtitle fxLayout.gt-xs="row" fxLayout.xs="column" fxLayoutGap="10px">
                            <img src="../assets/img/member/{{ item.FileUrl}}" *ngIf="!imgURL" class="rounded-circle" alt="...">
                            <span fxFlex="5%"> {{ itemed + 1 }} </span>
                            <span fxFlex="60%"> {{item.PName }} </span>
                            <span fxFlex="60%"> {{item.Description }} </span>
                            <span fxFlex="10"> {{item.Price }} </span>
                            <span fxFlex="10"> {{item.UnitsInStock }} </span>

                            <button mat-mini-fab color="primary" aria-label="" (click)="editItem(item)">
                        <mat-icon> edit </mat-icon>
                    </button>
                            <button mat-mini-fab aria-label="" (click)="deleteItem(item.PID)">
                        <mat-icon> delete </mat-icon>
                    </button>
                        </mat-card-subtitle>
                    </mat-card-subtitle>

                    <!-- <mat-form-field>
            <mat-label>List length</mat-label>
            <input matInput [(ngModel)]="length" type="number">
          </mat-form-field>
          
          <mat-form-field>
            <mat-label>Page size</mat-label>
            <input matInput [(ngModel)]="pageSize" type="number">
          </mat-form-field> -->
                    <!-- <mat-form-field>
            <mat-label>Page size options</mat-label>
            <input matInput [ngModel]="pageSizeOptions" (ngModelChange)="setPageSizeOptions($event)"
                   [ngModelOptions]="{updateOn: 'blur'}" placeholder="Ex. 10,25,50">
          </mat-form-field> -->

                    <mat-paginator [length]="length" [pageSize]="pageSize" [pageSizeOptions]="pageSizeOptions" (page)="pageEvent = $event">
                    </mat-paginator>

                    <!-- <div *ngIf="pageEvent">
            <h5>Page Change Event Properties</h5>
            <div>List length: {{pageEvent.length}}</div>
            <div>Page size: {{pageEvent.pageSize}}</div>
            <div>Page index: {{pageEvent.pageIndex}}</div>
          </div> -->
                </mat-card>

            </div>


            <!-- Image Upload -->


            <div class="container" fxLayout="row" fxLayout.xs="column" fxLayoutWrap fxLayoutGap="0.2%" fxLayoutAlign="center">
                <div class="row">
                    <div class="col-md-6 offset-md-3">
                        <h3>Choose File</h3>
                        <div class="form-group">
                            <input type="file" name="image" (change)="fileProgress($event)" />
                        </div>
                        <div *ngIf="fileUploadProgress">
                            Upload progress: {{ fileUploadProgress }}
                        </div>
                        <div class="image-preview mb-3" *ngIf="previewUrl">
                            <img [src]="previewUrl" height="300" />
                        </div>

                        <div class="mb-3" *ngIf="uploadedFilePath">
                            {{uploadedFilePath}}
                        </div>

                        <div class="form-group">
                            <button class="btn btn-primary" (click)="onImageUpload()">Upload</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>